# Utiliser une image de base avec Maven et Java 22
FROM maven:3.9.8-eclipse-temurin-22

# Définir le répertoire de travail dans le conteneur
WORKDIR /app

# Copier le fichier POM et les sources
COPY pom.xml .
COPY src ./src

# Télécharger les dépendances Maven
RUN mvn dependency:go-offline

# Compiler l'application
RUN mvn clean install

# Exposer le port 8080
EXPOSE 8080

# Commande pour exécuter l'application
CMD ["mvn", "spring-boot:run"]
