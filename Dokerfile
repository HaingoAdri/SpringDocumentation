#
# Build du projet (Multi-Stage)
# --------------------------------
#
# Utiliser une image de Maven pour construire le projet avec Java
# Ce sous-environnement s'appelle "build"
FROM maven:3.9.6-eclipse-temurin-22 AS build
COPY . .
RUN mvn clean package

# Utiliser une image OpenJDK
# Exposer le port que notre composant va utiliser pour écouter les requêtes
# Copier le JAR généré depuis "build" et le renommer
FROM openjdk:22-jdk
EXPOSE 8761
COPY --from=build /app/target/mon-application-0.0.1-SNAPSHOT.jar app.jar
ENTRYPOINT ["java", "-jar", "/app.jar"]
